# Pod con Liveness Probe
# Detecta si un contenedor está vivo (corriendo correctamente)
# Si el probe falla, Kubernetes reinicia el contenedor automáticamente

apiVersion: v1  # Versión de la API de Kubernetes
kind: Pod       # Tipo de recurso: Pod
spec:           # Especificación del Pod
  containers:   # Lista de contenedores
  - name: app     # Nombre del contenedor
    image: myapp:latest  # Imagen de la aplicación
    livenessProbe:  # Probe de liveness (verifica que el contenedor esté vivo)
      httpGet:      # Tipo de probe: HTTP GET request
        path: /health  # Ruta del endpoint de health check
        port: 8080     # Puerto donde escucha la aplicación
      initialDelaySeconds: 30  # Tiempo de espera antes de empezar a verificar (30 segundos)
        # Da tiempo a la aplicación para iniciar
      periodSeconds: 10  # Frecuencia de verificación (cada 10 segundos)
        # Kubernetes verifica el health check cada 10 segundos
      # Si el probe falla (endpoint no responde o retorna error), Kubernetes reinicia el contenedor
      # Útil para detectar deadlocks o aplicaciones que no responden pero siguen corriendo

